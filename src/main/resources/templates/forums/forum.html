<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Biryani&family=Peralta&family=Ubuntu+Condensed&display=swap"
          rel="stylesheet">
    <!-- MDB -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.0.0/mdb.min.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="/forum-style.css">
    <link rel="stylesheet" type="text/css" href="/style.css">
    <link rel="icon" type="image/png" href="/favicon.png">
</head>
<body class="forum-body">
<header>
    <!-- Navbar -->
    <nav id="nav" class="navbar navbar-expand-lg navbar-light d-flex" th:fragment="navBar"
         xmlns:sec="http://www.w3.org/1999/xhtml">
        <!-- Container wrapper -->
        <div class="container">
            <!-- Navbar brand -->
            <a class="navbar-brand me-2" href="/">Project HandMeDown</a>

            <!-- Toggle button -->
            <button
                    class="navbar-toggler"
                    type="button"
                    data-mdb-toggle="collapse"
                    data-mdb-target="#navbarButtonsExample"
                    aria-controls="navbarButtonsExample"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
            >
                <i class="fas fa-bars"></i>
            </button>

            <!-- Collapsible wrapper -->
            <div sec:authorize="isAnonymous()" class="collapse navbar-collapse" id="navbarButtonsExample">
                <!-- Left links -->
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <!--                <li class="nav-link"><a class="" th:href="@{/sign-up}">Register</a></li>-->
                    <li class="nav-item"><a class="nav-link" th:href="@{/listings}">Marketplace</a></li>
                    <li class="nav-item"><a class="nav-link" th:href="@{/forum}">Forum</a></li>
                    <li class="nav-item"><a class="nav-link" th:href="@{/activities}">Activities</a></li>
                    <li class="nav-item"><a class="nav-link" th:href="@{/about}">About Us</a></li>
                    <!--                <li class="nav-link"><a class="" th:href="@{/login}">Login</a></li>-->
                </ul>
                <!-- Left links -->
                <div class="d-flex align-items-center">
                    <form th:action="@{/sign-up}" th:method="get">
                        <button type="submit" class="btn btn-link me-3">
                            Register
                        </button>
                    </form>
                    <form th:action="@{/login}" th:method="get">
                        <button type="submit" class="btn btn-link px-3 me-2">
                            Login
                        </button>
                    </form>
                </div>
            </div>
            <div sec:authorize="isAuthenticated()" class="collapse navbar-collapse" id="navbarButtonsExample">
                <!-- Left links -->
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <!--                <li class="nav-link"><a class="" th:href="@{/sign-up}">Register</a></li>-->
                    <li class="nav-item"><a class="nav-link" th:href="@{/listings}">Marketplace</a></li>
                    <li class="nav-item"><a class="nav-link" th:href="@{/forum}">Forum</a></li>
                    <li class="nav-item"><a class="nav-link" th:href="@{/activities}">Activities</a></li>
                    <li class="nav-item"><a class="nav-link" th:href="@{/about}">About Us</a></li>
                    <li class="nav-item"><a class="nav-link" th:href="@{/profile}">Profile</a></li>
                    <!--                <li class="nav-link"><a class="" th:href="@{/login}">Login</a></li>-->
                </ul>
                <!-- Left links -->
                <div class="d-flex align-items-center">
                    <form th:action="@{/logout}" th:method="post">
                        <button type="submit" class="btn btn-link px-3 me-2">
                            Logout
                        </button>
                    </form>
                </div>
            </div>
            <!-- Collapsible wrapper -->
        </div>
        <!-- Container wrapper -->
    </nav>
    <!-- Navbar -->
    <!-- Navbar -->

    <!-- Background image -->
    <div
            class="p-5 text-center bg-image"
            style="
      background-image: url('https://images.pexels.com/photos/1337382/pexels-photo-1337382.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2');
      height: 400px;
    "
    >
        <div class="mask" style="background-color: rgba(0, 0, 0, 0.3);">
            <div class="d-flex justify-content-center align-items-center h-100">
                <div class="text-white">
                    <h1 class="mb-3">Project HandMeDown</h1>
                    <h4 class="mb-3">A Place for Parents to Connect</h4>
                    <div sec:authorize="isAnonymous()">
                        <a class="btn btn-outline-light btn-lg" href="/login" role="button"
                        >Login</a
                        >
                        <a class="btn btn-outline-light btn-lg" href="/sign-up" role="button"
                        >Register</a
                        >
                    </div>
                    <div sec:authorize="isAuthenticated()">
                        <a class="btn btn-outline-light btn-lg" href="/profile" role="button"
                        >Profile</a
                        >
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Background image -->
</header>
<div class="spacer"></div>

<main class="container">
    <div class="row">
        <div class="col-md-7">
        <h1 class="forum-main-title">Parents Forum</h1>
        <h5 class="forum-mission">How far away a mote of dust suspended in a sunbeam culture galaxies Vangelis venture. Stirred by starlight kindling the energy hidden in matter extraordinary claims require extraordinary evidence paroxysm of global death the only home we've ever known astonishment. Vanquish the impossible not a sunrise but a galaxyrise the carbon in our apple pies finite but unbounded vanquish the impossible encyclopaedia galactica?</h5>
        </div>
        <div class="col-md-5">
            <!--        searchbar-->
            <form th:action="@{/posts/search}" method="get">
                <input type="text" name="keyword" th:value="${keyword}" placeholder="Search topics by keyword"
                       size="50">
                <button type="submit" class="btn btn-info">search</button>
                <a class="btn btn-primary" th:href="@{'/forum'}" role="button">reset</a>
            </form>
        </div>

    </div>
    <div class="page-transfer-button">
        <form action="/create/post" method="get">
            <button type="submit">Create Post</button>
        </form>
    </div>
    <div>
        <label for="forum-categories">Catagories</label>
        <select id="forum-categories" name="forum-categories" onChange="window.location.replace(this.value)">
            <div th:if="${categoryChosen}">
                <div th:each="category : ${categories}">
                    <div th:if="${category.getId() == chosenCategory.getId()}">
                        <option th:href="@{/FilterByCategory/{cat_id}(cat_id = ${chosenCategory.getId()})}" th:value="@{/FilterByCategory/{cat_id}(cat_id = ${chosenCategory.getId()})}" th:text="${chosenCategory.getName()}"></option>
                    </div>
                </div>
                <div th:each="category : ${categories}">
                    <div th:if="${category.getId() != chosenCategory.getId()}">
                        <option th:href="@{/FilterByCategory/{cat_id}(cat_id = ${category.getId()})}" th:value="@{/FilterByCategory/{cat_id}(cat_id = ${category.getId()})}" th:text="${category.getName()}"></option>
                    </div>
                </div>
            </div>
            <div th:if="${noCategory}">
                <div th:each="category : ${categories}">
                    <option th:href="@{/FilterByCategory/{cat_id}(cat_id = ${category.getId()})}" th:value="@{/FilterByCategory/{cat_id}(cat_id = ${category.getId()})}" th:text="${category.getName()}"></option>
                </div>
            </div>

        </select>
    </div>
    <!--    forum topics-->
    <section class="forum-content">
        <div class="post_body">
            <ol class="topic_main_body" th:each="post : ${posts}">
                <div class="inner_main_bloc">
                    <div class="topic_inside_title">
                            <span>
                               <a th:href="@{/forum_post/{id}(id=${post.id})}">
                                    <span class="post-title" th:text="${post.title}"></span>
                               </a>
                            </span>
                        <br>
                        <span class="post-body" th:text="${post.body}"></span>


                        <div class="topic_cats">
                            <ul class="topic_cats_list " role="list">
                                <li class="post-cat-label">Categories:&nbsp;</li>
                                <li class="post-cats "  th:each="cat : ${post.getForumPostCategories()}">

                                    <a th:href="@{/FilterByCategory/{cat_id}(cat_id=${cat.getId()})}">

                                        <span class="topic_cat_name" th:text="${cat.getName()}"></span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <span class="date-time-forum-display">
                               <p>Asked by:
                                    <a href=""> <!-- needs anchor to username profile view-->
                                        <span th:text="${post.user.getUsername()}"></span>
                                    </a>,&nbsp; <time th:text="${post.timestamp}"></time>
                               </p>
                            </span>
                    </div> <!-- end of topic_inside_title-->
                    <div class="replies_count_section">
                        <span th:text="${post.getForumReplies().size()}"></span>
                        <span>replies</span>
                    </div>
                </div> <!-- end of inner_main_bloc-->
            </ol>
        </div> <!-- end of post_body-->
    </section>

    <footer class="text-center text-white">
        <div class="container p-4"></div>
        <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
            © 2020 Copyright:
            <a class="text-white" href="https://mdbootstrap.com/">MDBootstrap.com</a>
        </div>
    </footer>
</main>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.0.0/mdb.min.js"></script>

</body>

</html>